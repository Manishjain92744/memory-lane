{"ast":null,"code":"var _jsxFileName = \"/Users/manishkumar/Documents/Project/Frontend/src/contexts/AudioContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AudioContext = /*#__PURE__*/createContext();\nexport const useAudio = () => {\n  _s();\n  const context = useContext(AudioContext);\n  if (!context) {\n    throw new Error('useAudio must be used within an AudioProvider');\n  }\n  return context;\n};\n_s(useAudio, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const AudioProvider = ({\n  children\n}) => {\n  _s2();\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [musicFiles, setMusicFiles] = useState([]);\n  const [currentMusic, setCurrentMusic] = useState(null);\n  const [isLooping, setIsLooping] = useState(true);\n  const audioRef = useRef(new Audio('/romantic-music.mp3'));\n  useEffect(() => {\n    const audio = audioRef.current;\n    audio.loop = isLooping;\n    audio.volume = 0.3;\n\n    // Add event listener to ensure loop works\n    const handleEnded = () => {\n      if (isLooping) {\n        audio.currentTime = 0;\n        audio.play().catch(() => {\n          console.log('Audio loop play blocked');\n        });\n      }\n    };\n    audio.addEventListener('ended', handleEnded);\n    fetchMusicFiles();\n    return () => {\n      audio.removeEventListener('ended', handleEnded);\n      audio.pause();\n      audio.currentTime = 0;\n    };\n  }, [isLooping]);\n  const fetchMusicFiles = async () => {\n    try {\n      const response = await axios.get('http://localhost:8080/api/music');\n      setMusicFiles(response.data);\n      // Set the first music file as current if available\n      if (response.data.length > 0 && !currentMusic) {\n        setCurrentMusic(response.data[0]);\n      }\n    } catch (error) {\n      console.error('Error fetching music files:', error);\n    }\n  };\n  const toggleMusic = () => {\n    const audio = audioRef.current;\n    if (isPlaying) {\n      audio.pause();\n      setIsPlaying(false);\n    } else {\n      // Only set src if it's different from current src or if no src is set\n      if (currentMusic && audio.src !== `http://localhost:8080/api/images/${currentMusic}`) {\n        audio.src = `http://localhost:8080/api/images/${currentMusic}`;\n      }\n      audio.play().catch(() => {\n        console.log('Audio autoplay blocked');\n      });\n      setIsPlaying(true);\n    }\n  };\n  const changeMusic = musicFile => {\n    const audio = audioRef.current;\n    const wasPlaying = isPlaying;\n    if (wasPlaying) {\n      audio.pause();\n    }\n    setCurrentMusic(musicFile);\n    if (musicFile) {\n      audio.src = `http://localhost:8080/api/images/${musicFile}`;\n      if (wasPlaying) {\n        audio.play().catch(() => {\n          console.log('Audio autoplay blocked');\n        });\n      }\n    }\n  };\n  const value = {\n    isPlaying,\n    musicFiles,\n    currentMusic,\n    toggleMusic,\n    changeMusic,\n    fetchMusicFiles\n  };\n  return /*#__PURE__*/_jsxDEV(AudioContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n_s2(AudioProvider, \"RN8MOCoH7/W31YGQ9T4rh8w8YLU=\");\n_c = AudioProvider;\nvar _c;\n$RefreshReg$(_c, \"AudioProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","AudioContext","useAudio","_s","context","Error","AudioProvider","children","_s2","isPlaying","setIsPlaying","musicFiles","setMusicFiles","currentMusic","setCurrentMusic","isLooping","setIsLooping","audioRef","Audio","audio","current","loop","volume","handleEnded","currentTime","play","catch","console","log","addEventListener","fetchMusicFiles","removeEventListener","pause","response","get","data","length","error","toggleMusic","src","changeMusic","musicFile","wasPlaying","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/manishkumar/Documents/Project/Frontend/src/contexts/AudioContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nconst AudioContext = createContext();\n\nexport const useAudio = () => {\n  const context = useContext(AudioContext);\n  if (!context) {\n    throw new Error('useAudio must be used within an AudioProvider');\n  }\n  return context;\n};\n\nexport const AudioProvider = ({ children }) => {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [musicFiles, setMusicFiles] = useState([]);\n  const [currentMusic, setCurrentMusic] = useState(null);\n  const [isLooping, setIsLooping] = useState(true);\n  const audioRef = useRef(new Audio('/romantic-music.mp3'));\n\n  useEffect(() => {\n    const audio = audioRef.current;\n    audio.loop = isLooping;\n    audio.volume = 0.3;\n    \n    // Add event listener to ensure loop works\n    const handleEnded = () => {\n      if (isLooping) {\n        audio.currentTime = 0;\n        audio.play().catch(() => {\n          console.log('Audio loop play blocked');\n        });\n      }\n    };\n    \n    audio.addEventListener('ended', handleEnded);\n    \n    fetchMusicFiles();\n    \n    return () => {\n      audio.removeEventListener('ended', handleEnded);\n      audio.pause();\n      audio.currentTime = 0;\n    };\n  }, [isLooping]);\n\n  const fetchMusicFiles = async () => {\n    try {\n      const response = await axios.get('http://localhost:8080/api/music');\n      setMusicFiles(response.data);\n      // Set the first music file as current if available\n      if (response.data.length > 0 && !currentMusic) {\n        setCurrentMusic(response.data[0]);\n      }\n    } catch (error) {\n      console.error('Error fetching music files:', error);\n    }\n  };\n\n  const toggleMusic = () => {\n    const audio = audioRef.current;\n    if (isPlaying) {\n      audio.pause();\n      setIsPlaying(false);\n    } else {\n      // Only set src if it's different from current src or if no src is set\n      if (currentMusic && audio.src !== `http://localhost:8080/api/images/${currentMusic}`) {\n        audio.src = `http://localhost:8080/api/images/${currentMusic}`;\n      }\n      audio.play().catch(() => {\n        console.log('Audio autoplay blocked');\n      });\n      setIsPlaying(true);\n    }\n  };\n\n  const changeMusic = (musicFile) => {\n    const audio = audioRef.current;\n    const wasPlaying = isPlaying;\n    \n    if (wasPlaying) {\n      audio.pause();\n    }\n    \n    setCurrentMusic(musicFile);\n    \n    if (musicFile) {\n      audio.src = `http://localhost:8080/api/images/${musicFile}`;\n      if (wasPlaying) {\n        audio.play().catch(() => {\n          console.log('Audio autoplay blocked');\n        });\n      }\n    }\n  };\n\n  const value = {\n    isPlaying,\n    musicFiles,\n    currentMusic,\n    toggleMusic,\n    changeMusic,\n    fetchMusicFiles\n  };\n\n  return (\n    <AudioContext.Provider value={value}>\n      {children}\n    </AudioContext.Provider>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}