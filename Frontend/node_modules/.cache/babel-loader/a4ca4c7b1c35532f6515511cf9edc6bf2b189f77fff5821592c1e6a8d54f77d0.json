{"ast":null,"code":"var _jsxFileName = \"/Users/manishkumar/Documents/Project/Frontend/src/components/AuthWrapper.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useAudio } from '../contexts/AudioContext';\nimport Login from './Login';\nimport Signup from './Signup';\nimport HomePage from './HomePage';\nimport Gallery from './Gallery';\nimport UploadPage from './UploadPage';\nimport MusicUploadPage from './MusicUploadPage';\nimport MessagePage from './MessagePage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthWrapperContainer = styled.div`\n  min-height: 100vh;\n`;\n_c = AuthWrapperContainer;\nconst AuthWrapper = () => {\n  _s();\n  const location = useLocation();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [showLogin, setShowLogin] = useState(true);\n  const {\n    stopMusic\n  } = useAudio();\n  useEffect(() => {\n    // Check if user is already logged in\n    const savedUser = localStorage.getItem('user');\n    if (savedUser) {\n      try {\n        const user = JSON.parse(savedUser);\n        setCurrentUser(user);\n        setIsAuthenticated(true);\n      } catch (error) {\n        localStorage.removeItem('user');\n      }\n    }\n  }, []);\n  const handleLoginSuccess = user => {\n    setCurrentUser(user);\n    setIsAuthenticated(true);\n  };\n  const handleSignupSuccess = user => {\n    // After successful signup, switch to login\n    setShowLogin(true);\n  };\n  const handleLogout = () => {\n    stopMusic(); // Stop the music when user logs out\n    localStorage.removeItem('user');\n    setCurrentUser(null);\n    setIsAuthenticated(false);\n    setShowLogin(true);\n  };\n  const switchToSignup = () => {\n    setShowLogin(false);\n  };\n  const switchToLogin = () => {\n    setShowLogin(true);\n  };\n  if (isAuthenticated) {\n    // Render different components based on the current route\n    switch (location.pathname) {\n      case '/gallery':\n        return /*#__PURE__*/_jsxDEV(AuthWrapperContainer, {\n          children: /*#__PURE__*/_jsxDEV(Gallery, {\n            currentUser: currentUser,\n            onLogout: handleLogout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this);\n      case '/upload':\n        return /*#__PURE__*/_jsxDEV(AuthWrapperContainer, {\n          children: /*#__PURE__*/_jsxDEV(UploadPage, {\n            currentUser: currentUser,\n            onLogout: handleLogout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this);\n      case '/upload/music':\n        return /*#__PURE__*/_jsxDEV(AuthWrapperContainer, {\n          children: /*#__PURE__*/_jsxDEV(MusicUploadPage, {\n            currentUser: currentUser,\n            onLogout: handleLogout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(AuthWrapperContainer, {\n          children: /*#__PURE__*/_jsxDEV(HomePage, {\n            currentUser: currentUser,\n            onLogout: handleLogout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(AuthWrapperContainer, {\n    children: /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      mode: \"wait\",\n      children: showLogin ? /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          x: -50\n        },\n        animate: {\n          opacity: 1,\n          x: 0\n        },\n        exit: {\n          opacity: 0,\n          x: 50\n        },\n        transition: {\n          duration: 0.3\n        },\n        children: /*#__PURE__*/_jsxDEV(Login, {\n          onLoginSuccess: handleLoginSuccess,\n          onSwitchToSignup: switchToSignup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)\n      }, \"login\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          x: 50\n        },\n        animate: {\n          opacity: 1,\n          x: 0\n        },\n        exit: {\n          opacity: 0,\n          x: -50\n        },\n        transition: {\n          duration: 0.3\n        },\n        children: /*#__PURE__*/_jsxDEV(Signup, {\n          onSignupSuccess: handleSignupSuccess,\n          onSwitchToLogin: switchToLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this)\n      }, \"signup\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthWrapper, \"GZGIUhJgPZkdICLK3T+eybPKD6k=\", false, function () {\n  return [useLocation, useAudio];\n});\n_c2 = AuthWrapper;\nexport default AuthWrapper;\nvar _c, _c2;\n$RefreshReg$(_c, \"AuthWrapperContainer\");\n$RefreshReg$(_c2, \"AuthWrapper\");","map":{"version":3,"names":["React","useState","useEffect","useLocation","styled","motion","AnimatePresence","useAudio","Login","Signup","HomePage","Gallery","UploadPage","MusicUploadPage","MessagePage","jsxDEV","_jsxDEV","AuthWrapperContainer","div","_c","AuthWrapper","_s","location","isAuthenticated","setIsAuthenticated","currentUser","setCurrentUser","showLogin","setShowLogin","stopMusic","savedUser","localStorage","getItem","user","JSON","parse","error","removeItem","handleLoginSuccess","handleSignupSuccess","handleLogout","switchToSignup","switchToLogin","pathname","children","onLogout","fileName","_jsxFileName","lineNumber","columnNumber","mode","initial","opacity","x","animate","exit","transition","duration","onLoginSuccess","onSwitchToSignup","onSignupSuccess","onSwitchToLogin","_c2","$RefreshReg$"],"sources":["/Users/manishkumar/Documents/Project/Frontend/src/components/AuthWrapper.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useAudio } from '../contexts/AudioContext';\nimport Login from './Login';\nimport Signup from './Signup';\nimport HomePage from './HomePage';\nimport Gallery from './Gallery';\nimport UploadPage from './UploadPage';\nimport MusicUploadPage from './MusicUploadPage';\nimport MessagePage from './MessagePage';\n\nconst AuthWrapperContainer = styled.div`\n  min-height: 100vh;\n`;\n\nconst AuthWrapper = () => {\n  const location = useLocation();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [showLogin, setShowLogin] = useState(true);\n  const { stopMusic } = useAudio();\n\n  useEffect(() => {\n    // Check if user is already logged in\n    const savedUser = localStorage.getItem('user');\n    if (savedUser) {\n      try {\n        const user = JSON.parse(savedUser);\n        setCurrentUser(user);\n        setIsAuthenticated(true);\n      } catch (error) {\n        localStorage.removeItem('user');\n      }\n    }\n  }, []);\n\n  const handleLoginSuccess = (user) => {\n    setCurrentUser(user);\n    setIsAuthenticated(true);\n  };\n\n  const handleSignupSuccess = (user) => {\n    // After successful signup, switch to login\n    setShowLogin(true);\n  };\n\n  const handleLogout = () => {\n    stopMusic(); // Stop the music when user logs out\n    localStorage.removeItem('user');\n    setCurrentUser(null);\n    setIsAuthenticated(false);\n    setShowLogin(true);\n  };\n\n  const switchToSignup = () => {\n    setShowLogin(false);\n  };\n\n  const switchToLogin = () => {\n    setShowLogin(true);\n  };\n\n  if (isAuthenticated) {\n    // Render different components based on the current route\n    switch (location.pathname) {\n      case '/gallery':\n        return (\n          <AuthWrapperContainer>\n            <Gallery currentUser={currentUser} onLogout={handleLogout} />\n          </AuthWrapperContainer>\n        );\n      case '/upload':\n        return (\n          <AuthWrapperContainer>\n            <UploadPage currentUser={currentUser} onLogout={handleLogout} />\n          </AuthWrapperContainer>\n        );\n      case '/upload/music':\n        return (\n          <AuthWrapperContainer>\n            <MusicUploadPage currentUser={currentUser} onLogout={handleLogout} />\n          </AuthWrapperContainer>\n        );\n      default:\n        return (\n          <AuthWrapperContainer>\n            <HomePage currentUser={currentUser} onLogout={handleLogout} />\n          </AuthWrapperContainer>\n        );\n    }\n  }\n\n  return (\n    <AuthWrapperContainer>\n      <AnimatePresence mode=\"wait\">\n        {showLogin ? (\n          <motion.div\n            key=\"login\"\n            initial={{ opacity: 0, x: -50 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: 50 }}\n            transition={{ duration: 0.3 }}\n          >\n            <Login \n              onLoginSuccess={handleLoginSuccess}\n              onSwitchToSignup={switchToSignup}\n            />\n          </motion.div>\n        ) : (\n          <motion.div\n            key=\"signup\"\n            initial={{ opacity: 0, x: 50 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -50 }}\n            transition={{ duration: 0.3 }}\n          >\n            <Signup \n              onSignupSuccess={handleSignupSuccess}\n              onSwitchToLogin={switchToLogin}\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </AuthWrapperContainer>\n  );\n};\n\nexport default AuthWrapper; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}